<div class="movie-card">
  <div class="movie-card__image-container">
    <img [src]="movie.poster_path | posterSrc: 'w500'" [alt]="movie.title" class="movie-card__image" loading="lazy" />
    <div class="movie-card__play-overlay" [routerLink]="['/trailer', movie.id]" title="Watch Trailer">
      <div class="play-icon">‚ñ∂</div>
    </div>
  </div>

  <div class="movie-card__content">
    <div class="movie-card__header">
      <h3 class="movie-card__title">{{ movie.title }}</h3>
      <button
        class="movie-card__favorite-btn"
        [class.favorite-active]="isFavorite"
        (click)="toggleFavorite()"
        [title]="isFavorite ? 'Remove from favorites' : 'Add to favorites'"
      >
        {{ isFavorite ? '‚ù§Ô∏è' : 'ü§ç' }}
      </button>
    </div>

    <div class="movie-card__info">
      <div class="info-item">
        <span class="info-label">Year:</span>
        <span class="info-value">{{ movie.release_date | date: 'yyyy' }}</span>
      </div>
      <div class="info-item">
        <span class="info-label">Rating:</span>
        <span class="info-value">{{ movie.vote_average }}</span>
      </div>
      <div class="info-item">
        <span class="info-label">Genre:</span>
        <span class="info-value">{{ movie.genres | join }}</span>
      </div>
      <div class="info-item">
        <span class="info-label">Director:</span>
        <a
          [href]="'https://imdb.com/name/' + movie.original_language"
          target="_blank"
          rel="noopener noreferrer"
          class="info-value info-link"
        >
          {{ movie.original_language }}
        </a>
      </div>
      <div class="info-item">
        <span class="info-label">Countries:</span>
        <span class="info-value">{{ movie.original_language }}</span>
      </div>
    </div>

    <div class="movie-card__plot">
      <div class="plot-content">
        <p [class.expanded]="isExpanded">{{ movie.overview | truncate: maxDescriptionLength : '...' : isExpanded }}</p>
        @if (shouldShowToggle()) {
          <button
            class="show-more-btn"
            (click)="toggleDescription()"
            [attr.aria-expanded]="isExpanded"
            [attr.aria-label]="isExpanded ? 'Show less description' : 'Show more description'"
          >
            {{ isExpanded ? 'Show less' : 'Show more' }}
          </button>
        }
      </div>
    </div>
  </div>
</div>
